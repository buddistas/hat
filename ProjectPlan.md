# Hat Web ‚Äî –ü–ª–∞–Ω –ø—Ä–æ–µ–∫—Ç–∞ (RU)

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
- [1. –¶–µ–ª–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è](#1-—Ü–µ–ª–∏-–∏-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)
- [2. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#2-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
- [3. –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ—Å—Ç–∞–≤–∫–∏ (MVP)](#3-–æ—Å–Ω–æ–≤–Ω—ã–µ-–ø–æ—Å—Ç–∞–≤–∫–∏-mvp)
- [4. –≠—Ç–∞–ø—ã –∏ —Å—Ä–æ–∫–∏](#4-—ç—Ç–∞–ø—ã-–∏-—Å—Ä–æ–∫–∏)
- [5. –ö–æ–º–∞–Ω–¥—ã](#5-–∫–æ–º–∞–Ω–¥—ã)
- [6. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#6-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- [7. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª –∏–≥—Ä—ã](#7-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è-–ø—Ä–∞–≤–∏–ª-–∏–≥—Ä—ã)
- [8. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö](#8-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–¥–∞–Ω–Ω—ã—Ö-—Ç–µ–∫—É—â–∞—è-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
- [9. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å–ª–æ–≤](#9-–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è-—Å–ª–æ–≤)
- [10. –°–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã](#10-—Å–æ—Å—Ç–æ—è–Ω–∏—è-–∏–≥—Ä—ã)
- [11. –¢–∞–π–º–µ—Ä –∏ –ø–µ—Ä–µ–Ω–æ—Å –≤—Ä–µ–º–µ–Ω–∏](#11-—Ç–∞–π–º–µ—Ä-–∏-–ø–µ—Ä–µ–Ω–æ—Å-–≤—Ä–µ–º–µ–Ω–∏)
- [12. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤](#12-—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ-–∏-–ø–æ—Ä—è–¥–æ–∫-—Å–ª–æ–≤)
- [13. –≠–∫—Ä–∞–Ω—ã –∏ UX‚Äë–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏](#13-—ç–∫—Ä–∞–Ω—ã-–∏-ux–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏)
- [14. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞](#14-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞-–∏-—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
- [15. –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è](#15-–ø–ª–∞–Ω-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- [16. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å](#16-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å-–∏-–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å)
- [17. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ (MVP)](#17-–∫—Ä–∏—Ç–µ—Ä–∏–∏-–ø—Ä–∏—ë–º–∫–∏-mvp)
- [18. –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞](#18-—Ç–µ–∫—É—â–∏–π-—Å—Ç–∞—Ç—É—Å-–ø—Ä–æ–µ–∫—Ç–∞)
 - [19. –ü—Ä–∏–Ω—Ü–∏–ø—ã –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ª–æ–≤–∞—Ä—è](#19-–ø—Ä–∏–Ω—Ü–∏–ø—ã-–ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è-—Å–ª–æ–≤–∞—Ä—è)
 - [20. –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–≥—Ä–æ–∫–æ–≤ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–ª–æ–∫–∞–ª—å–Ω–æ)](#20-–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è-–∏–≥—Ä–æ–∫–æ–≤-–∏-—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞-–ª–æ–∫–∞–ª—å–Ω–æ)

---

## 1. –¶–µ–ª–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- **–¢–∏–ø –∏–≥—Ä—ã**: –ù–∞—Å—Ç–æ–ª—å–Ω–∞—è –∏–≥—Ä–∞ –Ω–∞ –æ–¥–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–∞—è –æ—Ç –∏–≥—Ä–æ–∫–∞ –∫ –∏–≥—Ä–æ–∫—É (–æ–¥–Ω–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, –∏–≥—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ–¥–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ò–≥—Ä–æ–∫–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —á–∏—Ç—ã, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞
- **–°–µ—Ç–µ–≤—ã–µ —É—Å–ª–æ–≤–∏—è**: –ù–µ –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω—ã, —Ü–µ–ª—å - –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ –ø–µ—Ä–µ–Ω–æ—Å–∞ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç–∏
- –û–¥–∏–Ω –¥–µ–≤–∞–π—Å, —Ä–µ–∂–∏–º pass-and-play; 4‚Äì20 –∏–≥—Ä–æ–∫–æ–≤ —Å—É–º–º–∞—Ä–Ω–æ.
- –¢—Ä–∏ —Ä–∞—É–Ω–¥–∞: 1) —Å–≤–æ–±–æ–¥–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ, 2) –∂–µ—Å—Ç—ã/–º–∏–º–∏–∫–∞, 3) –æ–¥–Ω–æ —Å–ª–æ–≤–æ.
- –•–æ–¥ 60 —Å–µ–∫—É–Ω–¥; PASS = ‚àí1 –æ—á–∫–æ; —É–≥–∞–¥–∞–Ω–Ω–æ–µ = +1 –æ—á–∫–æ.
- –†–∞—É–Ω–¥ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ ¬´—à–ª—è–ø–∞¬ª –ø—É—Å—Ç–∞; –∏–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –ø—É—Å—Ç–∞ —à–ª—è–ø–∞ –≤ —Ä–∞—É–Ω–¥–µ 3.
- –ü–µ—Ä–µ–Ω–æ—Å –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É —Ä–∞—É–Ω–¥–∞–º–∏ (ceil –¥–æ —Å–µ–∫—É–Ω–¥—ã); —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥ –Ω–∞—á–∏–Ω–∞–µ—Ç —Ç–æ—Ç –∂–µ –∏–≥—Ä–æ–∫, –∏ –ø–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω–Ω—ã–µ —Å–µ–∫—É–Ω–¥—ã (–±–µ–∑ –±–∞–∑–æ–≤—ã—Ö 60s).
- –ë–∞–∑–æ–≤—ã–π —Å–ª–æ–≤–∞—Ä—å RU; –±—Ä–µ–Ω–¥–æ–≤—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ (–ª–∞—Ç–∏–Ω–∏—Ü–µ–π), –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å–æ–±—ã–º –ø—É—Ç—ë–º.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–ª–æ–≤–∞ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –≤–Ω—É—Ç—Ä–∏ –±–∞–∑–æ–≤–æ–≥–æ RU-–ø–∞–∫–∞; –≥–ª–æ–±–∞–ª—å–Ω–∞—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è. –ö–∞–∂–¥–æ–µ —Å–ª–æ–≤–æ (–∏–ª–∏ —Ñ—Ä–∞–∑–∞) –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
- Mobile-first, –ø–æ—Ä—Ç—Ä–µ—Ç–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è, –≤–∏–±—Ä–∞—Ü–∏—è + –∑–≤—É–∫, –æ—Ñ–ª–∞–π–Ω‚Äë—Ä–µ–∂–∏–º —Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º.
- –ó–≤—É–∫ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –∏–≥—Ä–æ–≤–æ–≥–æ –æ–ø—ã—Ç–∞; –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç ¬´—Ç–∏—Ö–∏–π —Ä–µ–∂–∏–º¬ª.
- –ù–∞ —ç–∫—Ä–∞–Ω–µ —Ö–æ–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–∞—É–∑–∞/–≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–ª—è –≤–µ–¥—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞.
- –û—Ç–≤–µ—Ç—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é: —Ç–µ–∫—É—â–∏–π –∏–≥—Ä–æ–∫ –Ω–∞–∂–∏–º–∞–µ—Ç ¬´–í–µ—Ä–Ω–æ¬ª, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞.
- –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ Telegram‚Äë–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è ‚Äî –Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —Ñ–∞–∑–µ.

## 2. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ (MVP - —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π)
- Frontend: Vanilla HTML/CSS/JavaScript —Å WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- Backend: Node.js —Å WebSocket —Å–µ—Ä–≤–µ—Ä–æ–º –¥–ª—è —Ä–∞–∑–¥–∞—á–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ JSON —Å–æ–±—ã—Ç–∏–π
- –¢–∞–π–º–µ—Ä: –ü–æ–ª–Ω–æ—Å—Ç—å—é –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Å `performance.now()` + `requestAnimationFrame`
- –î–∞–Ω–Ω—ã–µ: –°–ª–æ–≤–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–æ–¥–∏–Ω —Ñ–∞–π–ª, –≤—Å–µ —Å–ª–æ–≤–∞ –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ)
- UI: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é Hat Up (http://apps.apple.com/ru/app/hat-up/id1472656524)
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: –û–¥–Ω–∞ –∫–æ–º–Ω–∞—Ç–∞, –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∏–≥—Ä–∞ –Ω–∞ –æ–¥–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ (pass-and-play)

## 3. –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ—Å—Ç–∞–≤–∫–∏ (MVP)
- MVP: –ø–æ–ª–Ω—ã–π 3‚Äë—Ä–∞—É–Ω–¥–Ω—ã–π —Ü–∏–∫–ª, —Ç–∞–π–º–µ—Ä —Å –ø–µ—Ä–µ–Ω–æ—Å–æ–º, –ø–æ–¥—Å—á—ë—Ç –æ—á–∫–æ–≤/—à—Ç—Ä–∞—Ñ—ã, –±–∞–∑–æ–≤—ã–π —Å–ª–æ–≤–∞—Ä—å –∏–∑ —Ñ–∞–π–ª–∞, –∏—Ç–æ–≥–∏ —Å ¬´–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º–∏ —Ñ–∞–∫—Ç–∞–º–∏¬ª, –≤–∏–±—Ä–æ/–∑–≤—É–∫
- WebSocket —Å–µ—Ä–≤–µ—Ä: —Ä–∞–∑–¥–∞—á–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –æ–±—Ä–∞–±–æ—Ç–∫–∞ JSON —Å–æ–±—ã—Ç–∏–π –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å: –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ UI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Hat Up –¥–ª—è –∑–Ω–∞–∫–æ–º–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: pass-and-play –Ω–∞ –æ–¥–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ, –æ–¥–Ω–∞ –∫–æ–º–Ω–∞—Ç–∞ –¥–ª—è –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤

## 4. –≠—Ç–∞–ø—ã –∏ —Å—Ä–æ–∫–∏
- M1: Node.js WebSocket —Å–µ—Ä–≤–µ—Ä + —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –±–∞–∑–æ–≤—ã–º UI. (1 –¥–µ–Ω—å)
- M2: –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞: 3 —Ä–∞—É–Ω–¥–∞, —Ç–∞–π–º–µ—Ä —Å –ø–µ—Ä–µ–Ω–æ—Å–æ–º, –ø–æ–¥—Å—á—ë—Ç –æ—á–∫–æ–≤, –±–∞–∑–æ–≤—ã–π —Å–ª–æ–≤–∞—Ä—å –∏–∑ —Ñ–∞–π–ª–∞. (1 –¥–µ–Ω—å)
- M3: WebSocket —Å–æ–±—ã—Ç–∏—è: JSON –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º. (1 –¥–µ–Ω—å)
- M4: UI –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π Hat Up: —ç–∫—Ä–∞–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∏–≥—Ä—ã, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤. (1 –¥–µ–Ω—å)
- M5: –ó–≤—É–∫, –≤–∏–±—Ä–∞—Ü–∏—è, –ø–∞—É–∑–∞/–≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –ø–æ–ª–∏—Ä–æ–≤–∫–∞. (1 –¥–µ–Ω—å)

## 5. –ö–æ–º–∞–Ω–¥—ã
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–∞–Ω–¥: 2‚Äì4.
- –†–∞–∑–º–µ—Ä –∫–æ–º–∞–Ω–¥—ã: –æ—Ç 2 –¥–æ 5 –∏–≥—Ä–æ–∫–æ–≤.
- –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ –≤ —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–æ–º–∞–Ω–¥–∞–º–∏ ‚Äî 1 –∏–≥—Ä–æ–∫.
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤:
  - –ö–Ω–æ–ø–∫–∞ –∞–≤—Ç–æ‚Äë—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ –∫–æ–º–∞–Ω–¥–∞–º —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ—Ä–æ–ª–ª–∞.
  - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Å—Ç–∞–≤–æ–≤.

## 6. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```
hat_web/
  server.js          # Node.js WebSocket —Å–µ—Ä–≤–µ—Ä
  package.json       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Node.js
  public/
    index.html       # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º CSS/JS
    words.csv        # –°–ª–æ–≤–∞—Ä—å —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
```

## 7. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª –∏–≥—Ä—ã
- –û–±—â–∏–π –ø—É–ª —Å–ª–æ–≤ –Ω–∞ –≤—Å—é –∏–≥—Ä—É; –∫–∞–∂–¥—ã–π —Ä–∞—É–Ω–¥ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–æ–≤–∞, –ø–æ–∫–∞ –≤—Å–µ –Ω–µ –±—É–¥—É—Ç —É–≥–∞–¥–∞–Ω—ã.
- `PASS` –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–Ω–∏–∂–∞–µ—Ç –æ—á–∫–∏ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ 1 (‚àí1) –∏ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤ –ª–æ–≥–µ —Å–æ–±—ã—Ç–∏–π.
- –ü–µ—Ä–µ–Ω–æ—Å –≤—Ä–µ–º–µ–Ω–∏ (carry‚Äëover):
  - –ï—Å–ª–∏ —Ä–∞—É–Ω–¥ –∏—Å—á–µ—Ä–ø–∞–Ω –≤–æ –≤—Ä–µ–º—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ö–æ–¥–∞, —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥ –Ω–∞—á–∏–Ω–∞–µ—Ç —Ç–æ—Ç –∂–µ –∏–≥—Ä–æ–∫ —Å ceil(remainingSeconds).
  - –ü–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–∞—É–Ω–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω–Ω—ã–µ —Å–µ–∫—É–Ω–¥—ã (–±–µ–∑ –±–∞–∑–æ–≤—ã—Ö 60s).
  - –í—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ø—ã—Ç–∫–∏ –≤ —Ä–∞—É–Ω–¥–µ ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ 60s.
  - –ï—Å–ª–∏ —Ä–∞—É–Ω–¥ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Ä–æ–≤–Ω–æ –≤ –º–æ–º–µ–Ω—Ç –∏—Å—Ç–µ—á–µ–Ω–∏—è —Ö–æ–¥–∞ (time up), –ø–µ—Ä–µ–Ω–æ—Å –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è.
  - **–í—Ä–µ–º—è –ù–ï –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –º–µ–∂–¥—É –∏–≥—Ä–∞–º–∏** - –æ—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø–∞—Ä—Ç–∏–∏.
  - **–î–∞–Ω–Ω—ã–µ –æ—á–∏—â–∞—é—Ç—Å—è –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∏–≥—Ä—ã** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –∏ —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏.
- –û—á–∫–∏ –º–æ–≥—É—Ç —É—Ö–æ–¥–∏—Ç—å –≤ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è; –Ω–∏–∂–Ω–∏—Ö –≥—Ä–∞–Ω–∏—Ü –Ω–µ—Ç.

### 7.1. –õ–æ–≥–∏–∫–∞ –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç–∏ —Ö–æ–¥–æ–≤
- **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–∏**: –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∏–≥—Ä—ã —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ—á–µ—Ä–µ–¥—å —Ö–æ–¥–æ–≤:
  - –°–ª—É—á–∞–π–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∫–æ–º–∞–Ω–¥ (–ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ –∫–æ–º–∞–Ω–¥)
  - –°–ª—É—á–∞–π–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö `turnOrder`:
    ```js
    turnOrder: {
      teams: [], // –ü–æ—Ä—è–¥–æ–∫ –∫–æ–º–∞–Ω–¥ (—Å–ª—É—á–∞–π–Ω—ã–π)
      playersByTeam: {}, // –ü–æ—Ä—è–¥–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã (—Å–ª—É—á–∞–π–Ω—ã–π)
      currentTeamIndex: 0, // –ò–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–π –∫–æ–º–∞–Ω–¥—ã –≤ –æ—á–µ—Ä–µ–¥–∏
      currentPlayerIndex: 0 // –ò–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞ –≤ –∫–æ–º–∞–Ω–¥–µ
    }
    ```

- **–ê–ª–≥–æ—Ä–∏—Ç–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ö–æ–¥–æ–≤**:
  1. –•–æ–¥ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–º–∞–Ω–¥–µ –≤ –æ—á–µ—Ä–µ–¥–∏ (`currentTeamIndex++`)
  2. –ï—Å–ª–∏ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –∫–æ–Ω–µ—Ü —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥ (`currentTeamIndex === 0`), –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∏–≥—Ä–æ–∫—É (`currentPlayerIndex++`)
  3. –ï—Å–ª–∏ –∏–Ω–¥–µ–∫—Å –∏–≥—Ä–æ–∫–∞ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤ –≤ –∫–æ–º–∞–Ω–¥–µ, —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –Ω–∞ 0
  4. –í—ã–±–∏—Ä–∞–µ–º –∏–≥—Ä–æ–∫–∞: `teams[currentTeamIndex].playersByTeam[currentPlayerIndex]`

- **–ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ —Å–ª–æ–≤ –ø—Ä–∏ —Å–º–µ–Ω–µ –∏–≥—Ä–æ–∫–∞**:
  - –ü—Ä–∏ –∫–∞–∂–¥–æ–º –ø–µ—Ä–µ—Ö–æ–¥–µ —Ö–æ–¥–∞ –∫ –Ω–æ–≤–æ–º—É –∏–≥—Ä–æ–∫—É —Å–ª–æ–≤–∞ –≤ –ø—É–ª–µ –ø–µ—Ä–µ–º–µ—à–∏–≤–∞—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–ª–≥–æ—Ä–∏—Ç–º Fisher-Yates –¥–ª—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
  - –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ –æ—Å—Ç–∞—é—Ç—Å—è –≤ –ø—É–ª–µ –∏ –º–æ–≥—É—Ç –¥–æ—Å—Ç–∞—Ç—å—Å—è –ª—é–±–æ–º—É –∏–≥—Ä–æ–∫—É

- **–≠–∫—Ä–∞–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞**:
  - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —Ö–æ–¥–æ–º –∏–≥—Ä–æ–∫–∞, –≤–∫–ª—é—á–∞—è –ø–µ—Ä–≤—ã–π
  - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–º—è —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞ –∏ –µ–≥–æ –∫–æ–º–∞–Ω–¥—É
  - –ò–º–µ–µ—Ç –∫—Ä–∞—Å–∏–≤—É—é –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—è–≤–ª–µ–Ω–∏—è —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º —Å–≤–µ—á–µ–Ω–∏—è
  - –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–≥—Ä–æ–∫–∞–º –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ —Å–≤–æ–µ–º—É —Ö–æ–¥—É
  - –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ –∏–≥—Ä–æ–≤–æ–º—É —ç–∫—Ä–∞–Ω—É –ø–æ –Ω–∞–∂–∞—Ç–∏—é –∫–Ω–æ–ø–∫–∏ "–ù–∞—á–∞—Ç—å"

- **–≠–∫—Ä–∞–Ω –ø–µ—Ä–µ–¥–∞—á–∏ —Ö–æ–¥–∞**:
  - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –º–µ–∂–¥—É —Ö–æ–¥–∞–º–∏ –∏–≥—Ä–æ–∫–æ–≤ –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞
  - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–º—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞ –∏ –µ–≥–æ –∫–æ–º–∞–Ω–¥—É
  - –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–≥—Ä–æ–∫–∞–º –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ —Å–≤–æ–µ–º—É —Ö–æ–¥—É
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —ç–∫—Ä–∞–Ω—É –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞ –ø–æ –Ω–∞–∂–∞—Ç–∏—é "–°—Ç–∞—Ä—Ç"

- **–ü—Ä–∞–≤–∏–ª–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –≤—ã–¥–∞—á–∏ PASS-—Å–ª–æ–≤**:
  - –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ –ø–µ—Ä–µ–º–µ—â–∞—é—Ç—Å—è –≤ –∫–æ–Ω–µ—Ü –æ—á–µ—Ä–µ–¥–∏ `availableWords`
  - –ú–æ–≥—É—Ç –¥–æ—Å—Ç–∞—Ç—å—Å—è —Ç–æ–º—É –∂–µ –∏–≥—Ä–æ–∫—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤ –ø—É–ª–µ –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å –¥—Ä—É–≥–∏—Ö —Å–ª–æ–≤
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –≤–µ–¥–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

## 8. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö (—Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

### gameState (—Å–µ—Ä–≤–µ—Ä)
```javascript
{
  gameId: string,
  players: Array<{id: string, name: string, teamId: string}>,
  teams: Array<{id: string, name: string, playerIds: string[]}>,
  currentRound: 0 | 1 | 2,
  currentPlayer: {id: string, name: string, teamId: string},
  currentWord: string | null,
  availableWords: string[],
  usedWords: string[],
  teamStatsByRound: {
    0: {[teamId: string]: number},
    1: {[teamId: string]: number}, 
    2: {[teamId: string]: number}
  },
  playerStats: {
    [playerId: string]: {
      guessed: number,
      passed: number,
      totalScore: number
    }
  },
  playerCarriedTime: {[playerId: string]: number} // –û—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∏–≥—Ä—ã
}
```

## 9. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å–ª–æ–≤
- –†–µ–≥–∏—Å—Ç—Ä: –≤ —Ö—Ä–∞–Ω–∏–º–æ–º CSV –≤—Å–µ –°–õ–û–í–ê (–ø–µ—Ä–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞) —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –í –í–ï–†–•–ù–ï–ú –†–ï–ì–ò–°–¢–†–ï; –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —É—Ä–æ–≤–µ–Ω—å —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –∏—Å—Ö–æ–¥–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä/–Ω–∞–ø–∏—Å–∞–Ω–∏–µ.
- –ö–∏—Ä–∏–ª–ª–∏—Ü–∞: upperCase ‚Üí trim ‚Üí –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–±–µ–ª–æ–≤ (—Å—Ö–ª–æ–ø—ã–≤–∞–Ω–∏–µ) ‚Üí –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∏—Ä–µ (‚Äì ‚Äî ‚àí ‚Üí `-`) –∏ –∞–ø–æ—Å—Ç—Ä–æ—Ñ–æ–≤ (‚Äô ` ¬¥ ‚Üí `'`) ‚Üí trim. ¬´–Å¬ª –ø—Ä–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–µ –ø—Ä–∏—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è –∫ ¬´–ï¬ª (–∫–æ–ª–ª—è—Ü–∏—è ru, sensitivity=base).
- –ë—Ä–µ–Ω–¥—ã (–ª–∞—Ç–∏–Ω–∏—Ü–∞): –ø–µ—Ä–µ–≤–æ–¥—è—Ç—Å—è –≤ –≤–µ—Ä—Ö–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä, —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã –Ω–µ –∏–∑–º–µ–Ω—è—é—Ç—Å—è, –∫—Ä–æ–º–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–±–µ–ª–æ–≤/–∞–ø–æ—Å—Ç—Ä–æ—Ñ–æ–≤/—Ç–∏—Ä–µ.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–ª–æ–≤–∞: –¥–µ—Ñ–∏—Å/—Ç–∏—Ä–µ –∏ –∞–ø–æ—Å—Ç—Ä–æ—Ñ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã; —ç–º–æ–¥–∑–∏ –∑–∞–ø—Ä–µ—â–µ–Ω—ã.
- –í –∏—Å—Ö–æ–¥–Ω–æ–º –±–∞–∑–æ–≤–æ–º —Å–ª–æ–≤–∞—Ä–µ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –ª—é–±—ã–µ —Å–∏–º–≤–æ–ª—ã (–∫—Ä–æ–º–µ —ç–º–æ–¥–∑–∏ –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º –≤–≤–æ–¥–µ).
- –î–µ–¥—É–ø-–ª–∏–Ω–∏—è: —Ç–æ—á–Ω—ã–µ –¥—É–±–ª–∏ –∑–∞–ø–∏—Å–µ–π (—Å–ª–æ–≤–æ+–∫–∞—Ç–µ–≥–æ—Ä–∏—è+—É—Ä–æ–≤–µ–Ω—å –ø–æ—Å–ª–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏) —É–¥–∞–ª—è—é—Ç—Å—è.

## 10. –°–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
- –°–æ—Å—Ç–æ—è–Ω–∏—è: `lobby` ‚Üí `setup` ‚Üí `preround(r)` ‚Üí `handoff` ‚Üí `turnActive` ‚Üí `turnEnd` ‚Üí `roundReview` ‚Üí `roundEnd` ‚Üí `preround(r+1)` ‚Üí ‚Ä¶ ‚Üí `gameSummary`
- –°–æ–±—ã—Ç–∏—è: `GAME_CREATED`, `TEAMS_CONFIGURED`, `START_ROUND`, `START_TURN`, `PAUSE`, `RESUME`, `GUESS_OK`, `PASS`, `TIMER_TICK`, `TIMER_EXPIRED`, `END_TURN`, `ROUND_DEPLETED`, `CARRY_TIME`, `START_NEXT_ROUND`, `END_GAME`

## 11. –¢–∞–π–º–µ—Ä –∏ –ø–µ—Ä–µ–Ω–æ—Å –≤—Ä–µ–º–µ–Ω–∏
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ü–æ–ª–Ω–æ—Å—Ç—å—é –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Ç–∞–π–º–µ—Ä —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `performance.now()` + `requestAnimationFrame`.
- **–•—Ä–∞–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `localStorage` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É —Ä–∞—É–Ω–¥–∞–º–∏
- **–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏–µ `visibilitychange` –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–∏ –≤ —Ñ–æ–∫—É—Å.
- **–§–æ—Ä–º—É–ª—ã**:
  - `remainingTime = max(0, duration - (now - startTime))`
  - `carry = ceil(remainingTime / 1000)` ‚Äî –ø–µ—Ä–µ–Ω–æ—Å –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É —Ä–∞—É–Ω–¥–∞–º–∏ (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
  - –ù–∞ —Å—Ç–∞—Ä—Ç–µ 2‚Äë–≥–æ –∏ 3‚Äë–≥–æ —Ä–∞—É–Ω–¥–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª–æ –º–∏–Ω–∏–º—É–º–∞: –µ—Å–ª–∏ –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω–Ω–æ–µ –≤—Ä–µ–º—è `carry ‚àà (0;5)`, —Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `5` —Å–µ–∫—É–Ω–¥. –≠—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ –≤ `src/entities/Game.js` –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ —Ä–∞—É–Ω–¥–∞ (`currentRound === 1 || currentRound === 2`).
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
  - –¢–æ—á–Ω–æ—Å—Ç—å –¥–æ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥
  - –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –ø—Ä–æ–±–ª–µ–º–∞–º —Ñ–æ–Ω–æ–≤—ã—Ö –≤–∫–ª–∞–¥–æ–∫
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—É–∑—ã/–≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
  - –ü–µ—Ä–µ–Ω–æ—Å –≤—Ä–µ–º–µ–Ω–∏ —Ç–æ–ª—å–∫–æ –Ω–∞ –ø–µ—Ä–≤—É—é –ø–æ–ø—ã—Ç–∫—É —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–∞—É–Ω–¥–∞
  - **–ê–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å**: –ü–æ–ª–Ω–∞—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –ª–æ–≥–∏–∫–∏ –≤—Ä–µ–º–µ–Ω–∏
  - **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
  - **–û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö**: –í—Ä–µ–º—è –ù–ï –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –º–µ–∂–¥—É –∏–≥—Ä–∞–º–∏, –æ—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø–∞—Ä—Ç–∏–∏

## 12. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤
- –ü–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤ –≤ –∫–∞–∂–¥–æ–º —Ä–∞—É–Ω–¥–µ ‚Äî —Å–ª—É—á–∞–π–Ω—ã–π.
- –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç—å –≤—ã–¥–∞—á–∏ –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è.
- –ü—Ä–æ–ø—É—â–µ–Ω–Ω–æ–µ —Å–ª–æ–≤–æ –º–æ–∂–µ—Ç –≤–Ω–æ–≤—å –¥–æ—Å—Ç–∞—Ç—å—Å—è —Ç–æ–º—É –∂–µ –∏–≥—Ä–æ–∫—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤ —à–ª—è–ø–µ –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å –¥—Ä—É–≥–∏—Ö —Å–ª–æ–≤.
 - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–≥–∞–¥—ã–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é: –≤–µ–¥—É—â–∏–π –Ω–∞–∂–∏–º–∞–µ—Ç ¬´–í–µ—Ä–Ω–æ¬ª –ø—Ä–∏ —Å–ª—ã—à–∏–º–æ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ.

### 12.1. –ü–æ—Ä—è–¥–æ–∫ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å–ª–æ–≤–∞—Ä—è (CSV)
- –§–æ—Ä–º–∞—Ç CSV: `—Å–ª–æ–≤–æ,–∫–∞—Ç–µ–≥–æ—Ä–∏—è,—É—Ä–æ–≤–µ–Ω—å` (–±–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏–ª–∏ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: —Å–Ω–∞—á–∞–ª–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–∞–ª—Ñ–∞–≤–∏—Ç `ru`, `sensitivity=base`), –∑–∞—Ç–µ–º –ø–æ —Å–ª–æ–≤—É (–∞–ª—Ñ–∞–≤–∏—Ç `ru`, `sensitivity=base`).
- –£—Ä–æ–≤–µ–Ω—å (`–æ–±—ã—á–Ω—ã–π`/`–ø–æ–≤—ã—à–µ–Ω–Ω—ã–π`) –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏.
- –ü—Ä–∏ –∑–∞–ø–∏—Å–∏ —Å–æ–±–ª—é–¥–∞–µ—Ç—Å—è –≤–µ—Ä—Ö–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ–ª–æ–Ω–∫–∏ ¬´—Å–ª–æ–≤–æ¬ª.

## 13. –≠–∫—Ä–∞–Ω—ã –∏ UX‚Äë–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- Start/Lobby, Setup (–∏–º–µ–Ω–∞ 1‚Äì24 —Å–∏–º–≤–æ–ª–∞; 4‚Äì20 –∏–≥—Ä–æ–∫–æ–≤; –∏–º—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ; –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ `@username`), Rules, PlayerIntro (—ç–∫—Ä–∞–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π), Handoff, Turn (–∫—Ä—É–ø–Ω–æ–µ —Å–ª–æ–≤–æ, —Ç–∞–π–º–µ—Ä, –∫–Ω–æ–ø–∫–∏ `–£–≥–∞–¥–∞–Ω–æ`/`–ü–∞—Å`), Review, Results, Dictionary, Settings.
- –†–∞—É–Ω–¥ 2 –±–µ–∑ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–¥—Å–∫–∞–∑–æ–∫ (—Ç–æ–ª—å–∫–æ –∂–µ—Å—Ç—ã/–º–∏–º–∏–∫–∞).
- –í–∏–±—Ä–æ: —Å—Ç–∞—Ä—Ç(60ms), T‚àí5s([30,40,30]), guessed/pass(25ms), –∫–æ–Ω–µ—Ü(120ms).
- –ó–≤—É–∫: –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω. –ö–æ—Ä–æ—Ç–∫–∏–π —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª, –æ–¥–∏–Ω–æ—á–Ω—ã–π –Ω–∞ `T‚àí5s`, –¥–ª–∏–Ω–Ω—ã–π –Ω–∞ –æ–∫–æ–Ω—á–∞–Ω–∏–µ, –∫–ª–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ (–ø—Ä–µ–ª–æ–∞–¥). –≠–∫—Ä–∞–Ω –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ ¬´—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è –∞—É–¥–∏–æ¬ª –ø–æ –ø–µ—Ä–≤–æ–º—É —Ç–∞–ø—É. –û—Ç–¥–µ–ª—å–Ω–æ–≥–æ ¬´—Ç–∏—Ö–æ–≥–æ —Ä–µ–∂–∏–º–∞¬ª –Ω–µ—Ç.
- –£—á–∏—Ç—ã–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –Ω–æ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ ¬´—Ç–∏—Ö–æ–≥–æ —Ä–µ–∂–∏–º–∞¬ª –Ω–µ—Ç.
- –ù–∞ —ç–∫—Ä–∞–Ω–µ —Ö–æ–¥–∞ ‚Äî –∫–Ω–æ–ø–∫–∞ `–ü–∞—É–∑–∞/–í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å`; –ø—Ä–∏ –ø–∞—É–∑–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –≤—Å–µ –∫–Ω–æ–ø–∫–∏, –∫—Ä–æ–º–µ –ø–∞—É–∑—ã –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–≥—Ä—ã; –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–Ω–∏–º–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏/–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–≥—Ä—ã.
- **–°—á–µ—Ç—á–∏–∫ —Å–ª–æ–≤**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ "–ï—â–µ —Å–ª–æ–≤ - X" –Ω–∞ —ç–∫—Ä–∞–Ω–µ —Ö–æ–¥–∞ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∏ —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π (–∫—Ä–∞—Å–Ω—ã–π ‚â§10, –æ—Ä–∞–Ω–∂–µ–≤—ã–π 11-25, –∂–µ–ª—Ç—ã–π >25 —Å–ª–æ–≤).

## 14. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–º–∞–Ω–¥**: –æ—á–∫–∏ –ø–æ —Ä–∞—É–Ω–¥–∞–º (teamStatsByRound), –æ–±—â–∏–π —Å—á–µ—Ç, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
- **–õ–∏—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤**: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–≥–∞–¥–∞–Ω–Ω—ã—Ö —Å–ª–æ–≤, –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤, –æ–±—â–∏–µ –æ—á–∫–∏
- **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**: –¥–≤–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—ã—Ö —ç–∫—Ä–∞–Ω–∞ —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö
- **–¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è**: –∑–µ–ª–µ–Ω—ã–π (–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –æ—á–∫–∏), –∫—Ä–∞—Å–Ω—ã–π (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ), —Å–µ—Ä—ã–π (–Ω–æ–ª—å)

## 15. –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- Unit: –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Ç–∞–π–º–µ—Ä, –ø–æ–¥—Å—á—ë—Ç —Å ‚àí1 –∑–∞ PASS, –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—É–ª–∞ –º–µ–∂–¥—É —Ä–∞—É–Ω–¥–∞–º–∏, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è/–¥–µ–¥—É–ø
- Component: Turn (–º–æ–∫–∏ —Ç–∞–π–º–µ—Ä–∞/–≤–∏–±—Ä–æ/–∑–≤—É–∫–∞), Review, Dictionary (–≤–∞–ª–∏–¥–∞—Ü–∏—è/–æ—à–∏–±–∫–∏)
- E2E: –ø–æ–ª–Ω—ã–π 3‚Äë—Ä–∞—É–Ω–¥–Ω—ã–π –º–∞—Ç—á —Å –ø–µ—Ä–µ–Ω–æ—Å–æ–º, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏, —Å—Ü–µ–Ω–∞—Ä–∏–π –ü–∞—É–∑–∞/–í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å

## 16. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
- –ú–µ–º–æ–∏–∑–∞—Ü–∏—è, –º–∏–Ω–∏–º—É–º –ª–∏—à–Ω–∏—Ö –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–æ–∫, –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ
- –í—ã—Å–æ–∫–∞—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å, –∫—Ä—É–ø–Ω—ã–µ —Ç–∞—á‚Äë—Ç–∞—Ä–≥–µ—Ç—ã, ARIA –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –ü–æ—Ä—Ç—Ä–µ—Ç–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è; –º—è–≥–∫–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø—Ä–∏ –ø–æ–≤–æ—Ä–æ—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

## 17. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ (MVP)
- –ü–æ–ª–Ω—ã–π 3‚Äë—Ä–∞—É–Ω–¥–Ω—ã–π —Ü–∏–∫–ª —Å –ø–µ—Ä–µ–Ω–æ—Å–æ–º –≤—Ä–µ–º–µ–Ω–∏ (ceil) –∏ —à—Ç—Ä–∞—Ñ–∞–º–∏.
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∏–≥—Ä—ã (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏).
- 2‚Äì4 –∫–æ–º–∞–Ω–¥—ã; 2‚Äì5 –∏–≥—Ä–æ–∫–æ–≤ –≤ –∫–æ–º–∞–Ω–¥–µ; –º–∞–∫—Å. —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –∫–æ–º–∞–Ω–¥–∞–º–∏ ‚Äî 1 –∏–≥—Ä–æ–∫.
- –ê–≤—Ç–æ‚Äë—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å —Ä–µ—Ä–æ–ª–ª–æ–º –∏ —Ä—É—á–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–æ–≤.
- PASS –¥–∞—ë—Ç ‚àí1 –æ—á–∫–æ; –≤–æ–∑–º–æ–∂–Ω—ã –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –æ—á–∫–∏.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–ª–æ–≤–∞ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è; –¥–µ–¥—É–ø —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –∫–∏—Ä–∏–ª–ª–∏—Ü—ã/–ª–∞—Ç–∏–Ω–∏—Ü—ã; —ç–º–æ–¥–∑–∏ –∑–∞–ø—Ä–µ—â–µ–Ω—ã.
- –ü–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤ ‚Äî —Å–ª—É—á–∞–π–Ω—ã–π; –ø—Ä–∞–≤–∏–ª–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –≤—ã–¥–∞—á–∏ PASS‚Äë—Å–ª–æ–≤–∞ —Å–æ–±–ª—é–¥–∞–µ—Ç—Å—è.
- –ó–≤—É–∫ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω; –≤–∏–±—Ä–æ –∏ –∑–≤—É–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–æ—á–∫–∞—Ö; —ç–∫—Ä–∞–Ω —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∞—É–¥–∏–æ; –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ ¬´—Ç–∏—Ö–æ–≥–æ —Ä–µ–∂–∏–º–∞¬ª –Ω–µ—Ç.
- RU‚Äë–ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è; –æ—Ñ–ª–∞–π–Ω‚Äë—Ä–µ–∂–∏–º; –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏.
- –ù–∞ —ç–∫—Ä–∞–Ω–µ —Ö–æ–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–∞—É–∑–∞/–≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ; –≤–æ –≤—Ä–µ–º—è –ø–∞—É–∑—ã –¥–µ–π—Å—Ç–≤–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã, —Å–æ–±—ã—Ç–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è.
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–≥–∞–¥—ã–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –∫–Ω–æ–ø–∫–æ–π ¬´–í–µ—Ä–Ω–æ¬ª —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞; –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.
- –¢–µ—Å—Ç—ã: –∫–ª—é—á–µ–≤—ã–µ unit/component + –º–∏–Ω–∏–º—É–º 3 E2E‚Äë—Å—Ü–µ–Ω–∞—Ä–∏—è (–ø–æ–ª–Ω—ã–π –º–∞—Ç—á, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ, –ø–∞—É–∑–∞/–º—å—é—Ç/—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ).

## 18. –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (MVP)
- ‚úÖ –ü–æ–ª–Ω—ã–π 3-—Ä–∞—É–Ω–¥–Ω—ã–π —Ü–∏–∫–ª –∏–≥—Ä—ã
- ‚úÖ –¢–∞–π–º–µ—Ä —Å –ø–µ—Ä–µ–Ω–æ—Å–æ–º –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É —Ä–∞—É–Ω–¥–∞–º–∏
- ‚úÖ –ü–æ–¥—Å—á–µ—Ç –æ—á–∫–æ–≤ –∏ —à—Ç—Ä–∞—Ñ–æ–≤
- ‚úÖ –ë–∞–∑–æ–≤—ã–π —Å–ª–æ–≤–∞—Ä—å –∏–∑ —Ñ–∞–π–ª–∞
- ‚úÖ WebSocket —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π Hat Up
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–º–∞–Ω–¥ –∏ –∏–≥—Ä–æ–∫–æ–≤
- ‚úÖ –≠–∫—Ä–∞–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞
- ‚úÖ –°—á–µ—Ç—á–∏–∫ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —Å–ª–æ–≤
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∏–≥—Ä—ã

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Pass-and-play –Ω–∞ –æ–¥–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- **–¢–∞–π–º–µ—Ä**: –ü–æ–ª–Ω–æ—Å—Ç—å—é –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Å `performance.now()`
- **–î–∞–Ω–Ω—ã–µ**: –°–ª–æ–≤–∞ –≤ CSV —Ñ–∞–π–ª–µ, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ –ø–∞–º—è—Ç–∏
- **UI**: Mobile-first –¥–∏–∑–∞–π–Ω —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

### –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
- –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤
- –§–∞–∫—Ç—ã –æ –ø—Ä–æ—à–µ–¥—à–µ–π –ø–∞—Ä—Ç–∏–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–ª–æ–≤
- –ß–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫
- –°–∞–º–æ–±–∞–ª–∞–Ω—Å–∏—Ä—É—é—â–∞—è—Å—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
- –†–µ–π—Ç–∏–Ω–≥–∏
- –û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º
- –ë–∞–ª–∞–Ω—Å —Å–ª–æ–∂–Ω—ã—Ö —Å–ª–æ–≤
- –ú–µ—Ç—Ä–∏–∫–∞ –ø—Ä–æ—Ü–µ–Ω—Ç–∞–∂–∞ —É–≥–∞–¥–∞–Ω–Ω—ã—Ö —Å–ª–æ–∂–Ω—ã—Ö —Å–ª–æ–≤ + —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è —Å—Ç–∞—Ç–∞ –ø–æ—Å–ª–µ –∏–≥—Ä—ã.
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–∞–≤ –∫–æ–º–∞–Ω–¥—ã –ø—Ä—è–º–æ –ø–æ —Ö–æ–¥—É –º–∞—Ç—á–∞

## 21. Telegram-–±–æ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–π

### 21.1. –¶–µ–ª–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- **–û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å**: –£–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–π —á–µ—Ä–µ–∑ Telegram-–±–æ—Ç–∞
- **–§—É–Ω–∫—Ü–∏–∏**: –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫ –≤–µ–±-–∏–≥—Ä–µ, –Ω–µ –∑–∞–º–µ–Ω—è—è –µ—ë

### 21.2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –í—Å—Ç—Ä–æ–µ–Ω –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Node.js —Å–µ—Ä–≤–µ—Ä
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞**: `node-telegram-bot-api` (polling –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é; webhook ‚Äî –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: HTTP API + WebSocket –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: —Ñ–∞–π–ª `telegram-config.js` (–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –±–æ—Ç–∞, `GAME_URL`, –ª–æ–≥‚Äë–Ω–∞—Å—Ç—Ä–æ–π–∫–∏). –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è, —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.
- **GAME_URL**: –±–∞–∑–æ–≤—ã–π URL –∏–≥—Ä—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –≤ –∫–Ω–æ–ø–∫–µ‚Äë—Å—Å—ã–ª–∫–µ. –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π HTTPS‚Äëtunnel (ngrok) ‚Äî Telegram –æ—Ç–∫–ª–æ–Ω—è–µ—Ç `http://localhost` –≤ inline‚Äë–∫–Ω–æ–ø–∫–∞—Ö.

### 21.3. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±–æ—Ç–∞
```
üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–π

[üéØ –°—Ç–∞—Ä—Ç] [üë• –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è]
[‚ùå –û—Ç–∫–ª—é—á–∏—Ç—å—Å—è] [üõë –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É]
```

### 21.4. –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –∫–Ω–æ–ø–æ–∫
- **"–°—Ç–∞—Ä—Ç"**: 
  - –ê–∫—Ç–∏–≤–Ω–∞ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –∏–≥—Ä—ã
  - –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≥–∏–ø–µ—Ä—Å—Å—ã–ª–∫—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
  - –°—Å—ã–ª–∫–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫: `<GAME_URL>?autoJoin=true&username=@username&gameId=<id>`
  - –í–ê–ñ–ù–û: –≤ Telegram inline‚Äë–∫–Ω–æ–ø–∫–∞—Ö –¥–æ–ø—É—Å—Ç–∏–º—ã —Ç–æ–ª—å–∫–æ –ø—É–±–ª–∏—á–Ω—ã–µ HTTPS URL. –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok URL –≤–∏–¥–∞ `https://<subdomain>.ngrok.io` –≤–º–µ—Å—Ç–æ `http://localhost:4000` –≤ `GAME_URL`.
  - –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–≥—Ä—ã

- **"–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è"**:
  - –ê–∫—Ç–∏–≤–Ω–∞ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–≥—Ä–æ–∫–æ–≤ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
  - –ë–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã–¥–∞—á–∏ –ø–µ—Ä–≤–æ–≥–æ —Å–ª–æ–≤–∞ –∏–≥—Ä—ã
  - –î–æ–±–∞–≤–ª—è–µ—Ç –∏–≥—Ä–æ–∫–∞ –≤ —Å–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

- **"–û—Ç–∫–ª—é—á–∏—Ç—å—Å—è"**:
  - –ê–∫—Ç–∏–≤–Ω–∞ –∫–æ–≥–¥–∞ –∏–≥—Ä–æ–∫ –≤ —Å–ø–∏—Å–∫–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
  - –£–¥–∞–ª—è–µ—Ç –∏–≥—Ä–æ–∫–∞ –∏–∑ —Å–ø–∏—Å–∫–∞

- **"–ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É"**:
  - –ê–∫—Ç–∏–≤–Ω–∞ –≤–æ –≤—Ä–µ–º—è –∞–∫—Ç–∏–≤–Ω–æ–π –∏–≥—Ä—ã
  - –¢—Ä–µ–±—É–µ—Ç –≤–≤–æ–¥ –∫–æ–¥–∞ "1104" –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
  - –ó–∞–≤–µ—Ä—à–∞–µ—Ç –∏–≥—Ä—É –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ

### 21.5. –ú–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç—ã
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–°—Ç–∞—Ä—Ç" –≤ –±–æ—Ç–µ
2. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≥–∏–ø–µ—Ä—Å—Å—ã–ª–∫—É —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
3. Telegram –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä —Å —Å—Å—ã–ª–∫–æ–π –Ω–∞ –∏–≥—Ä—É (—á–µ—Ä–µ–∑ inline‚Äë–∫–Ω–æ–ø–∫—É URL; —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–π HTTPS URL)
4. –í–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤
5. –î—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è—Ç—å—Å—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞
6. –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ WebSocket

### 21.6. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **–ù–∞—á–∞–ª–æ –∏–≥—Ä—ã**: "üéÆ –ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å! –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏ –Ω–∏–∂–µ"
- **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã**: "üèÅ –ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –°–ø–∞—Å–∏–±–æ –∑–∞ —É—á–∞—Å—Ç–∏–µ!"
- **–£—Å–ø–µ—à–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**: "‚úÖ –í—ã —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª–∏—Å—å –∫ –∏–≥—Ä–µ"
 - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–∫–ª—é—á–µ–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –±–æ—Ç–µ; –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.

### 21.7. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–ü–æ–ø—ã—Ç–∫–∞ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–π –∏–≥—Ä–µ**: "–ò–≥—Ä–∞ —É–∂–µ –∑–∞–ø—É—â–µ–Ω–∞. –ó–∞–≤–µ—Ä—à–∏—Ç–µ —Ç–µ–∫—É—â—É—é –∏–≥—Ä—É –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–æ–≤–æ–π"
- **–ü–æ–ø—ã—Ç–∫–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ –ø–æ–ª–Ω–æ–π –∏–≥—Ä–µ**: "–ò–≥—Ä–∞ —É–∂–µ –Ω–∞–±—Ä–∞–ª–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤"
- **–ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –Ω–µ —É—á–∞—Å—Ç–≤—É—è**: "–í—ã –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç–µ –≤ —Ç–µ–∫—É—â–µ–π –∏–≥—Ä–µ"

### 21.8. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–°–æ–±—ã—Ç–∏—è**: –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã, –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
- **–§–æ—Ä–º–∞—Ç**: JSON —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
- **–•—Ä–∞–Ω–µ–Ω–∏–µ**: –§–∞–π–ª `logs/telegram-bot.log` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
 - –ü—Ä–∏–º–µ—Ä —Å–ª—É–∂–µ–±–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π: `polling_error EFATAL`, `getaddrinfo ENOTFOUND api.telegram.org` ‚Äî —Å–º. 21.12.

### 21.9. API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –±–æ—Ç–∞
- `GET /api/game/status` - —Å—Ç–∞—Ç—É—Å –∏–≥—Ä—ã (–∞–∫—Ç–∏–≤–Ω–∞/–Ω–µ–∞–∫—Ç–∏–≤–Ω–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)
- `POST /api/game/start` - –∑–∞–ø—É—Å–∫ –Ω–æ–≤–æ–π –∏–≥—Ä—ã
- `POST /api/game/join` - –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
- `POST /api/game/leave` - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
- `POST /api/game/end` - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã

### 21.10. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞**: `http://localhost:4000`
- **–¢—É–Ω–Ω–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: ngrok –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è inline‚Äë–∫–Ω–æ–ø–∫–∏ URL –≤ Telegram (–Ω—É–∂–µ–Ω –ø—É–±–ª–∏—á–Ω—ã–π HTTPS). –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ URL ngrok –≤ `GAME_URL`.
- **–ü—Ä–æ–¥–∞–∫—à–Ω**: –£–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å —Ä–µ–∞–ª—å–Ω—ã–º –¥–æ–º–µ–Ω–æ–º

### 21.11. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–î–æ—Å—Ç—É–ø**: –û—Ç–∫—Ä—ã—Ç—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏–π —á–µ—Ä–µ–∑ API
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –¥–ª—è –∞—É–¥–∏—Ç–∞

### 21.12. –û—Ç–ª–∞–¥–∫–∞ –∏ —Ç–∏–ø–æ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- **400 Bad Request: Wrong HTTP URL** –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–°—Ç–∞—Ä—Ç": Telegram –æ—Ç–∫–ª–æ–Ω—è–µ—Ç `http://localhost`. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `GAME_URL` –Ω–∞ –ø—É–±–ª–∏—á–Ω—ã–π HTTPS (ngrok/–¥–æ–º–µ–Ω).
- **polling_error EFATAL / ECONNRESET / ENOTFOUND api.telegram.org**: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ `api.telegram.org` (DNS/—Ñ–∞–π—Ä–≤–æ–ª), —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–µ—Ç–∏, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞.
- **"query is too old"**: –æ–±—Ä–∞–±–æ—Ç–∫–∞ callback –∑–∞–Ω—è–ª–∞ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. –§–æ—Ä–º–∏—Ä—É–π—Ç–µ –æ—Ç–≤–µ—Ç/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–µ—á–µ–Ω–∏–µ ~2‚Äì3 —Å–µ–∫—É–Ω–¥.
- **–ö–Ω–æ–ø–∫–∞ "–°—Ç–∞—Ä—Ç" –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞**: –∞–∫—Ç–∏–≤–Ω–∞—è –∏–≥—Ä–∞ —É–∂–µ –∏–¥—ë—Ç ‚Äî –∑–∞–≤–µ—Ä—à–∏—Ç–µ –µ—ë (–∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è 1104).


## 19. –ü—Ä–∏–Ω—Ü–∏–ø—ã –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ª–æ–≤–∞—Ä—è
- **–û–≥–ª–∞–≤–ª–µ–Ω–∏–µ**: –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ - –≤—Å–µ–≥–¥–∞ –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ.
- **–†–µ–≥–∏—Å—Ç—Ä –∏ —è–∑—ã–∫**: —Å–ª–æ–≤–∞ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –í –í–ï–†–•–ù–ï–ú –†–ï–ì–ò–°–¢–†–ï; –∫–∞—Ç–µ–≥–æ—Ä–∏–∏/—É—Ä–æ–≤–Ω–∏ ‚Äî –≤ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ. –Ø–∑—ã–∫ ‚Äî —Ä—É—Å—Å–∫–∏–π –±–µ–∑ —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–π/–∞–Ω–≥–ª–∏—Ü–∏–∑–º–æ–≤ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —É—Å—Ç–æ—è–≤—à–∏—Ö—Å—è –∞–Ω–∞–ª–æ–≥–æ–≤.
- **–§–æ—Ä–º–∞—Ç —Ñ—Ä–∞–∑**: –º–Ω–æ–≥–æ—Å–ª–æ–≤–Ω—ã–µ —Ñ—Ä–∞–∑—ã –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –±–µ–∑ –∫–∞–≤—ã—á–µ–∫; –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ –∫–∞–≤—ã—á–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è.
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –Ω–µ –±–æ–ª–µ–µ 20% –∑–∞–ø–∏—Å–µ–π –≤ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–º–µ—é—Ç —É—Ä–æ–≤–µ–Ω—å ¬´–ø–æ–≤—ã—à–µ–Ω–Ω—ã–π¬ª, –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –¥–ª—è –Ω–∏–∑–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã—Ö/—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤ (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ —Ç–µ–∫—É—â–µ–º—É —Å–ª–æ–≤–∞—Ä—é –∏ –∑–¥—Ä–∞–≤–æ–º—É —Å–º—ã—Å–ª—É).
- **–î—É–±–ª–∏–∫–∞—Ç—ã**: –≥–ª–æ–±–∞–ª—å–Ω–æ –∑–∞–ø—Ä–µ—â–µ–Ω—ã –ø–æ—Å–ª–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ (`—ë‚Üí–µ`, —É–¥–∞–ª–µ–Ω–∏–µ –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏, —Å—Ö–ª–æ–ø—ã–≤–∞–Ω–∏–µ –ø—Ä–æ–±–µ–ª–æ–≤). –ß–∞—Å—Ç–∏—á–Ω–æ –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏–µ—Å—è —Ñ—Ä–∞–∑—ã (—Ç–∏–ø–∞ ¬´—ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –±—É–¥–∏–ª—å–Ω–∏–∫¬ª –∏ ¬´–±—É–¥–∏–ª—å–Ω–∏–∫¬ª) –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è.
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ)**: –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —Ç–æ—á–Ω–æ–≥–æ –¥—É–±–ª–∏–∫–∞—Ç–∞ –ù–ï –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞—Ç—å –∏ –ù–ï –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å ‚Äî —É–¥–∞–ª–∏—Ç—å –æ–¥–Ω—É –∏–∑ –¥—É–±–ª–µ–π (–≤ –ª—é–±–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏), –æ—Å—Ç–∞–≤–∏–≤ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä.
- **–ö–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã**: 
  - ¬´–ó–Ω–∞–º–µ–Ω–∏—Ç–æ—Å—Ç–∏¬ª –¥–æ–ø—É—Å–∫–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –∏ –≤—ã–º—ã—à–ª–µ–Ω–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π.
  - ¬´–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –≥–æ—Ä–æ–¥—Å–∫–∞—è —Å—Ä–µ–¥–∞¬ª –≤–∫–ª—é—á–∞–µ—Ç —Å—Ç–∏–ª–∏, —ç–ª–µ–º–µ–Ω—Ç—ã –∏ —Ç–µ—Ä–º–∏–Ω—ã, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç—ã.
  - ¬´–§–∏–ª—å–º—ã –∏ —Å–µ—Ä–∏–∞–ª—ã¬ª –∏ ¬´–ö–Ω–∏–≥–∏ –∏ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞¬ª ‚Äî –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ —Ç–∏–ø—É —Å—É—â–Ω–æ—Å—Ç–µ–π (—Ç–µ—Ä–º–∏–Ω—ã –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è), –Ω–æ –±–µ–∑ –∫–∞–≤—ã—á–µ–∫.
- **–§–æ–∫—É—Å –∫–æ–Ω—Ç–µ–Ω—Ç–∞**: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∏–º–µ–Ω/–Ω–∞–∑–≤–∞–Ω–∏–π.
- **–ü–æ—Ä—è–¥–æ–∫ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞**: —Å–ª–æ–≤–∞—Ä—å —Ö—Ä–∞–Ω–∏—Ç—Å—è –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏. –ù–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ –ø—Ä–∏ –∫–æ–º–º–∏—Ç–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –∞–≤—Ç–æ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é –∏ –∞–≤—Ç–æ—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É.
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è**: —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è (–ø–æ–ª–∏—Ç–∏–∫–∞/–æ—Å—Ç—Ä—ã–µ —Ç–µ–º—ã –¥–æ–ø—É—Å—Ç–∏–º—ã); –≤ –º–µ–¥–∏—Ü–∏–Ω–µ –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è –¥–∏–∞–≥–Ω–æ–∑—ã, –ø—Ä–æ—Ü–µ–¥—É—Ä—ã, –∞–Ω–∞—Ç–æ–º–∏—è; –∏–∑–±–µ–≥–∞—Ç—å –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –±—Ä–µ–Ω–¥–æ–≤ –ª–µ–∫–∞—Ä—Å—Ç–≤.
- **–ö–∞–¥–µ–Ω—Ü–∏—è –ø–æ—Å—Ç–∞–≤–æ–∫**: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–µ–¥—ë—Ç—Å—è –ø–∞—Ä—Ç–∏—è–º–∏ –ø–æ ~200 —Å–ª–æ–≤ –Ω–∞ –∏—Ç–µ—Ä–∞—Ü–∏—é (2 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ √ó ~100) —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏.

## 20. –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–≥—Ä–æ–∫–æ–≤ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–ª–æ–∫–∞–ª—å–Ω–æ)

### 20.1. –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–≥—Ä–æ–∫–æ–≤
- **–û—Å–Ω–æ–≤–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä**: `telegramUserId` (—á–∏—Å–ª–æ–≤–æ–π ID Telegram). –í MVP –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ ‚Äî –≤–≤–æ–¥–∏—Ç—Å—è –≤—Ä—É—á–Ω—É—é (–ø–æ–ª–µ –¥–ª—è ID) –∏–ª–∏ —á–µ—Ä–µ–∑ `@username` —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
- **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (fallback)**: —Å–≤–æ–±–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç `displayName`. –î–ª—è –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –∫–ª—é—á `playerKey`:
  - –µ—Å–ª–∏ –µ—Å—Ç—å `telegramUserId` ‚Üí `playerKey = tg:<id>`
  - –∏–Ω–∞—á–µ ‚Üí `playerKey = name:<sha1(normalizedDisplayName)>`, –≥–¥–µ `normalizedDisplayName = lower(trim(name))` (—Ö—ç—à —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–ª—é—á–∞; –≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Å—Ö–æ–¥–Ω–æ–µ –∏–º—è)
- **–ú–æ–¥–µ–ª—å –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏ (–≤ –ø–∞–º—è—Ç–∏)**:
```javascript
identity: {
  playerId: string,            // —ç—Ñ–µ–º–µ—Ä–Ω—ã–π ID –≤ —Ä–∞–º–∫–∞—Ö —Å–µ—Å—Å–∏–∏
  playerKey: string,           // —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –∫–ª—é—á –¥–ª—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
  telegramUserId?: string,     // –µ—Å–ª–∏ –≤–≤–µ–¥—ë–Ω
  displayName: string,         // –∏–º—è –¥–ª—è UI
  displayNameHistory?: string[]
}
```

### 20.2. –°–ª–æ–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ —Å—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Å—Å–∏–∏ (—ç–øhemeral)**:
  - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: —ç–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, ¬´–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–∞–∫—Ç—ã¬ª, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–∏—á–Ω—ã—Ö —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫.
  - –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª: –∂–∏–≤—ë—Ç –¥–æ —Å—Ç–∞—Ä—Ç–∞ —Å–ª–µ–¥—É—é—â–µ–π –ø–∞—Ä—Ç–∏–∏; –ø—Ä–∏ `start_game` ‚Äî –æ—á–∏—â–∞–µ—Ç—Å—è.
  - –ò—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã: —Å–æ–±—ã—Ç–∏–π–Ω—ã–π –ª–æ–≥ –∑–∞ —Å–µ—Å—Å–∏—é (append-only JSONL) + in-memory –∞–≥—Ä–µ–≥–∞—Ç—ã.
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤ (–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞—è, ¬´–Ω–∞–≤—Å–µ–≥–¥–∞¬ª)**:
  - –•—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ; –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –ø–∞—Ä—Ç–∏–∏.
  - –ö–ª—é—á ‚Äî `playerKey` (—Å–º. 20.1). –ü—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ `telegramUserId` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ `name:<hash>` ‚Üí `tg:<id>`.

### 20.3. –•—Ä–∞–Ω–∏–ª–∏—â–µ (–ª–æ–∫–∞–ª—å–Ω–æ, –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞)
- **–°–æ–±—ã—Ç–∏–π–Ω—ã–π –ª–æ–≥ —Å–µ—Å—Å–∏–∏**: `public/stats/sessions/<gameId>.jsonl` (append-only). –£–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –Ω–æ–≤–æ–π –ø–∞—Ä—Ç–∏–∏.
- **–†–∞–Ω—Ç–∞–π–º‚Äë—Å–Ω–∏–º–æ–∫**: `public/stats/runtime.json` (debounce –∫–∞–∂–¥—ã–µ 3‚Äì5—Å) ‚Äî –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ live‚Äë–≤–∏–¥–∂–µ—Ç–æ–≤.
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤**: `public/stats/players/<playerKey>.json` ‚Äî –∞–≥—Ä–µ–≥–∞—Ç—ã –ø–æ –∏–≥—Ä–æ–∫—É.
- **–õ–∏–¥–µ—Ä–±–æ—Ä–¥—ã (–∫—ç—à)**: `public/stats/leaderboards/<period>.json` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ; —Å—Ç—Ä–æ—è—Ç—Å—è –Ω–∞ –ª–µ—Ç—É –∏–∑ in-memory –∏ —Ñ–∞–π–ª–æ–≤.
- **–ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏**: –∑–∞–ø–∏—Å—å —á–µ—Ä–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –∏ `rename`; –æ—á–µ—Ä–µ–¥—å –∑–∞–ø–∏—Å–µ–π –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –≥–æ–Ω–æ–∫.

### 20.4. –î–æ–º–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –∞–≥—Ä–µ–≥–∞—Ç–æ–≤
```javascript
// –°–µ—Å—Å–∏—è (in-memory, –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ ‚Äî snapshot –≤ runtime.json)
sessionStats: {
  gameId: string,
  startedAt: number,
  endedAt?: number,
  perTeam: { [teamId: string]: { scoreByRound: {0:number,1:number,2:number}, total: number }},
  perPlayer: { [playerId: string]: { guessed: number, passed: number, totalScore: number, turnCount: number }},
  facts: { 
    longestStreak?: {playerId:string, length:number}, 
    fastestGuess?: {playerId:string, ms:number},
    mostPassedWord?: {word:string, count:number},
    hardestWord?: {word:string, totalTimeMs:number} // —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏–∑ sessionStats.wordTracking.wordDisplayTime; —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏ –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–ª–æ–≤–æ —Ä–∞—É–Ω–¥–∞ –±–ª–∞–≥–æ–¥–∞—Ä—è finalizeCurrentWordDisplay()
  },
  // –ù–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–µ—Å—Å–∏–∏
  wordTracking: {
    passedWords: { [word: string]: number }, // —Å—á–µ—Ç—á–∏–∫ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –ø–æ —Å–ª–æ–≤–∞–º
    wordDisplayTime: { [word: string]: number } // —Å—É–º–º–∞—Ä–Ω–æ–µ –≤—Ä–µ–º—è –ø–æ–∫–∞–∑–∞ —Å–ª–æ–≤–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
  },
  duration: {
    roundDurations: { 0: number, 1: number, 2: number }, // –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞—É–Ω–¥–æ–≤ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    totalGameDuration: number // –æ–±—â–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∞—Ä—Ç–∏–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
  },
  // –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
  _currentWord: string | null, // —Ç–µ–∫—É—â–µ–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º–æ–µ —Å–ª–æ–≤–æ
  _wordShownAt: number | null // –≤—Ä–µ–º—è –ø–æ–∫–∞–∑–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–ª–æ–≤–∞
}

// –ò–≥—Ä–æ–∫ (–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ –ø–æ playerKey)
playerStats: {
  playerKey: string,
  telegramUserId?: string,
  displayName?: string,
  totals: {
    gamesPlayed: number,
    wins: number,
    wordsGuessed: number,
    wordsPassed: number,
    totalScore: number,
    guessPerMinute?: number
  },
  categories?: { [category: string]: { guessed: number, passed: number }},
  lastPlayedAt?: number
}
```

### 20.5. API –∏ live‚Äë–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **HTTP (—á—Ç–µ–Ω–∏–µ)**:
  - `GET /api/stats/session/:gameId` ‚Äî –∞–≥—Ä–µ–≥–∞—Ç—ã —Ç–µ–∫—É—â–µ–π/—É–∫–∞–∑–∞–Ω–Ω–æ–π —Å–µ—Å—Å–∏–∏
  - `GET /api/stats/player/:playerKey` ‚Äî –∞–≥—Ä–µ–≥–∞—Ç—ã –∏–≥—Ä–æ–∫–∞
  - `GET /api/stats/leaderboard?period=7d|30d|all` ‚Äî –ª–∏–¥–µ—Ä–±–æ—Ä–¥
- **WebSocket (push)**:
  - `stats:update` ‚Äî –¥–µ–ª—å—Ç—ã –ø–æ —Å–µ—Å—Å–∏–∏ (–¥–ª—è –≤—å—é—à–µ–∫ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –∏–≥—Ä—ã)
  - `leaderboard:update` ‚Äî –¥–µ–ª—å—Ç—ã –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ –∏–≥—Ä–æ–∫–æ–≤

### 20.6. –ü–æ—Ç–æ–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
1. –í–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã: —Å–æ–±—ã—Ç–∏—è (`word_guessed`, `word_passed`, `start_turn`, `end_round`) ‚Üí –∑–∞–ø–∏—Å—å –≤ event log ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ in-memory –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ —Å–ª–æ–≤ –∏ –≤—Ä–µ–º–µ–Ω–∏ ‚Üí push `stats:update`.
2. –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∏–≥—Ä—ã: —Ä–∞—Å—á—ë—Ç ¬´—Ñ–∞–∫—Ç–æ–≤¬ª (–≤–∫–ª—é—á–∞—è —Å–∞–º—ã–µ —á–∞—Å—Ç–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ–º—ã–µ –∏ —Å–ª–æ–∂–Ω—ã–µ —Å–ª–æ–≤–∞) ‚Üí –ø–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ ‚Üí –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –¥–µ–ª—å—Ç –∫ `playerStats` (–ø–æ `playerKey`) ‚Üí –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞ ‚Üí push `leaderboard:update`.
3. –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –Ω–æ–≤–æ–π –∏–≥—Ä—ã (`start_game`): —É–¥–∞–ª–∏—Ç—å `public/stats/sessions/<gameId>.jsonl` –ø—Ä–µ–¥—ã–¥—É—â–µ–π –ø–∞—Ä—Ç–∏–∏ –∏ –æ—á–∏—Å—Ç–∏—Ç—å `sessionStats` (–≤–∫–ª—é—á–∞—è –Ω–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏).

### 20.7. –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `telegramUserId` –∏ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏. –†–µ–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ UI.
- –ü—Ä–∏ fallback‚Äë–∫–ª—é—á–µ `name:<sha1>` –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∏–º—è) –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–∫ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ö—Ä–∞–Ω–µ–Ω–∏—è.

### 20.8. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞/–∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å)
- –í–≤–æ–¥ –∏–≥—Ä–æ–∫–∞ –ø–æ `telegramUserId` –∏–ª–∏ –∏–º–µ–Ω–∏; —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ `playerKey`.
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Å—Å–∏–∏ –æ—á–∏—â–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç–∞—Ä—Ç–µ —Å–ª–µ–¥—É—é—â–µ–π –ø–∞—Ä—Ç–∏–∏.
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –ø–∞—Ä—Ç–∏–∏ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ –¥–∏—Å–∫.
- Live‚Äë–ª–∏–¥–µ—Ä–±–æ—Ä–¥—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ WebSocket.
- –ü—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ `telegramUserId` —É –∏–≥—Ä–æ–∫–∞ —Å —Ä–∞–Ω–µ–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–º `name:<sha1>` ‚Äî –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ –µ–¥–∏–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å.

### 20.9. –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è
- –®–∞–≥ 1: –í–≤–µ—Å—Ç–∏ `StatsService` –∏ `StatsRepository` (—Ñ–∞–π–ª–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è), —Ö—É–∫–∏ –∏–∑ use cases.
- –®–∞–≥ 2: HTTP‚Äë—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏ WebSocket push –¥–ª—è `stats:update` –∏ `leaderboard:update`.
- –®–∞–≥ 3: –ú–∏–Ω–∏‚Äë–≤–∏–¥–∂–µ—Ç—ã live‚Äë—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞ –≤ UI.
- –®–∞–≥ 4: –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π –ø—Ä–∏ –≤–≤–æ–¥–µ `telegramUserId`.

### 20.10. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram –±–æ—Ç–æ–º (—ç—Ç–∞–ø–Ω–æ—Å—Ç—å)
- **MVP (—Å–µ–π—á–∞—Å)**: –±–æ—Ç‚Äë–ª–æ–≥–∏–Ω –∏ —Å—Ç–∞—Ä—Ç —Å–µ—Å—Å–∏–∏ —á–µ—Ä–µ–∑ –±–æ—Ç–∞ ‚Äî –Ω–µ —Ä–µ–∞–ª–∏–∑—É–µ–º (–Ω–µ –¥–∞—ë—Ç —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–∞ MVP –∏ –Ω–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞). –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ `telegramUserId` –∏–ª–∏ –∏–º–µ–Ω–∏ –æ—Å—Ç–∞—ë—Ç—Å—è.
- **–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä**:
  - Webhook‚Äô–∏ –±–æ—Ç–∞: —Å–æ–∑–¥–∞–Ω–∏–µ/—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏, –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.
  - Telegram Login / WebApp –∏ deep‚Äëlinks –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∫–æ–º–Ω–∞—Ç–∞–º.

### 20.11. –õ–∏–¥–µ—Ä–±–æ—Ä–¥—ã –∏ –º–µ—Ç—Ä–∏–∫–∏ (—Ç–æ–ª—å–∫–æ ¬´–∑–∞ –≤—Å—ë –≤—Ä–µ–º—è¬ª)
- **–ü–æ–ª–∏—Ç–∏–∫–∞ –ø–µ—Ä–∏–æ–¥–∞**: —Ç–æ–ª—å–∫–æ ¬´all‚Äëtime¬ª. –ë–µ–∑ 7/30 –¥–Ω–µ–π –Ω–∞ MVP.
- **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ**: –∏–∑ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã—Ö `playerStats` (–∞–≥—Ä–µ–≥–∞—Ç—ã), –∫—ç—à–∏—Ä—É–µ–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ø–æ –∫–∞–∂–¥–æ–π –º–µ—Ç—Ä–∏–∫–µ.
- **–ú–µ—Ç—Ä–∏–∫–∏ (—Ä–∞—Å—à–∏—Ä—è–µ–º—ã–π —Ä–µ–µ—Å—Ç—Ä)**:
  - –í—Å–µ–≥–æ –∏–≥—Ä (`gamesPlayed`)
  - Winrate (`wins/gamesPlayed` –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–±–µ–¥–∏—Ç–µ–ª—è)
  - –õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç 1‚Äë–≥–æ —Ä–∞—É–Ω–¥–∞ (–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∫–æ—Ä–¥ –ø–æ —Å–µ—Å—Å–∏–∏)
  - –õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç 2‚Äë–≥–æ —Ä–∞—É–Ω–¥–∞ (–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∫–æ—Ä–¥ –ø–æ —Å–µ—Å—Å–∏–∏)
  - –õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç 3‚Äë–≥–æ —Ä–∞—É–Ω–¥–∞ (–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∫–æ—Ä–¥ –ø–æ —Å–µ—Å—Å–∏–∏)
  - –ú–µ–¥–∏–∞–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å (—Å–µ–∫/—Å–ª–æ–≤–æ) –≤ 1‚Äë–º —Ä–∞—É–Ω–¥–µ (median SPW R1)
  - –ú–µ–¥–∏–∞–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å (—Å–µ–∫/—Å–ª–æ–≤–æ) –≤–æ 2‚Äë–º —Ä–∞—É–Ω–¥–µ (median SPW R2)
  - –ú–µ–¥–∏–∞–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å (—Å–µ–∫/—Å–ª–æ–≤–æ) –≤ 3‚Äë–º —Ä–∞—É–Ω–¥–µ (median SPW R3)
  - –°–∞–º–∞—è –¥–ª–∏–Ω–Ω–∞—è –ø–æ–ª–æ—Å–∞ –ø–æ–±–µ–¥
  - –¢–µ–∫—É—â–∞—è –ø–æ–ª–æ—Å–∞ –ø–æ–±–µ–¥ (–≤ –ª–∏—á–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ)
  - –ú–∞–∫—Å–∏–º—É–º –±–∞–ª–ª–æ–≤ –∑–∞ –ø–∞—Ä—Ç–∏—é (–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∫–æ—Ä–¥)
  - –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ —Ä–∞—É–Ω–¥–∞–º: ¬´—Å–µ–∫—É–Ω–¥ –Ω–∞ —Å–ª–æ–≤–æ¬ª (Seconds Per Word, SPW) ‚Äî —Å–º. 20.13. –ë–µ–∑ GPM. –ê–≥—Ä–µ–≥–∞—Ü–∏—è ‚Äî –º–µ–¥–∏–∞–Ω–∞ SPW.
  - –ú–∞–∫—Å–∏–º—É–º –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤ –∑–∞ –ø–∞—Ä—Ç–∏—é (–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∫–æ—Ä–¥)
  - –õ—É—á—à–∏–π —Ö–æ–¥ 1‚Äë–≥–æ —Ä–∞—É–Ω–¥–∞ (–º–∞–∫—Å–∏–º—É–º –±–∞–ª–ª–æ–≤ –∑–∞ –æ–¥–∏–Ω —Ö–æ–¥)
  - –õ—É—á—à–∏–π —Ö–æ–¥ 2‚Äë–≥–æ —Ä–∞—É–Ω–¥–∞ (–º–∞–∫—Å–∏–º—É–º –±–∞–ª–ª–æ–≤ –∑–∞ –æ–¥–∏–Ω —Ö–æ–¥)
  - –õ—É—á—à–∏–π —Ö–æ–¥ 3‚Äë–≥–æ —Ä–∞—É–Ω–¥–∞ (–º–∞–∫—Å–∏–º—É–º –±–∞–ª–ª–æ–≤ –∑–∞ –æ–¥–∏–Ω —Ö–æ–¥)
- **–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ**: –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–∞–±–ª–∏—Ü-–ª–∏–¥–µ—Ä–±–æ—Ä–¥–æ–≤ (–ø–æ 1 –Ω–∞ –º–µ—Ç—Ä–∏–∫—É). –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ WebSocket `leaderboard:update` –¥–µ–ª—å—Ç–∞–º–∏ (—Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–∏–≤—à–∏–µ—Å—è —Å—Ç—Ä–æ–∫–∏/–ø–æ–∑–∏—Ü–∏–∏).
  - –î–ª—è —Å–µ—Ä–∏–π –ø–æ–±–µ–¥ –≤ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª—É—á—à–∞—è (–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è) —Å–µ—Ä–∏—è –ø–æ –∫–∞–∂–¥–æ–º—É –∏–≥—Ä–æ–∫—É.
  - –î–ª—è SPW‚Äë—Ç–∞–±–ª–∏—Ü —Ç–∞–π‚Äë–±—Ä–µ–π–∫–µ—Ä—ã: 1) –±–æ–ª—å—à–µ —É–≥–∞–¥–∞–Ω–Ω—ã—Ö —Å–ª–æ–≤ (desc), 2) –º–µ–Ω—å—à–µ —Å—É–º–º–∞—Ä–Ω–æ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (asc).

### 20.12. –ü—Ä–∞–≤–∏–ª–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –∏ –Ω–∏—á—å–∏—Ö
- –ü–æ–±–µ–¥–∏—Ç–µ–ª–µ–º —Å—á–∏—Ç–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –∏—Ç–æ–≥–æ–≤—ã–º —Å—á—ë—Ç–æ–º.
- –ü—Ä–∏ –Ω–∏—á—å–µ–π –ø–æ–±–µ–∂–¥–∞—é—Ç –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã, —Ä–∞–∑–¥–µ–ª–∏–≤—à–∏–µ –º–∞–∫—Å–∏–º—É–º. –ò–≥—Ä–æ–∫–∞–º –≤ —ç—Ç–∏—Ö –∫–æ–º–∞–Ω–¥–∞—Ö –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ–±–µ–¥–∞ –¥–ª—è winrate –∏ —Å–µ—Ä–∏–π.

### 20.13. –£—á—ë—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ ¬´—Å–µ–∫—É–Ω–¥ –Ω–∞ —Å–ª–æ–≤–æ¬ª (SPW)
- **–ü—Ä–æ–±–ª–µ–º–∞**: —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ö–æ–¥–∞ –∏ —Ä–∞–∑–Ω—ã–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–≥—Ä–æ–∫–æ–≤ –∏ –ø–æ–ø—ã—Ç–æ–∫ –∏—Å–∫–∞–∂–∞—é—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –µ—Å–ª–∏ —Å—á–∏—Ç–∞—Ç—å ¬´–æ—á–∫–∏ –∑–∞ —Ö–æ–¥/—Ä–∞—É–Ω–¥¬ª.
- **–†–µ—à–µ–Ω–∏–µ**: –∏–∑–º–µ—Ä—è–µ–º —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∞–∫—Ç–∏–≤–Ω–æ–µ –≤—Ä–µ–º—è –∏–≥—Ä–æ–∫–∞ –ø–æ —Ä–∞—É–Ω–¥–∞–º –∏ —Å—á–∏—Ç–∞–µ–º SPW = \(\frac{—Å–µ–∫—É–Ω–¥—ã\_–∞–∫—Ç–∏–≤–Ω–æ–π\_–∏–≥—Ä—ã}{—É–≥–∞–¥–∞–Ω–Ω—ã–µ\_—Å–ª–æ–≤–∞}\) –¥–ª—è —Ä–∞—É–Ω–¥–∞ –∏ –∞–≥—Ä–µ–≥–∞—Ç–æ–≤.
- **–ò—Å—Ç–æ—á–Ω–∏–∫ –≤—Ä–µ–º–µ–Ω–∏**: –≤–Ω—É—Ç—Ä–∏–∏–≥—Ä–æ–≤–æ–π —Ç–∞–π–º–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–∞–≤–∏—Ç—Å—è –Ω–∞ –ø–∞—É–∑—É –≤–º–µ—Å—Ç–µ —Å –∏–≥—Ä–æ–π. –°–æ–±—ã—Ç–∏—è: `START_TURN` ‚Üí `PAUSE/RESUME` ‚Üí `END_TURN`/`ROUND_DEPLETED`.
- **–°–±–æ—Ä**:
  - –ù–∞ `START_TURN`: —Ñ–∏–∫—Å–∏—Ä—É–µ–º `turnStartedAt`.
  - –ù–∞ `PAUSE`: —Ñ–∏–∫—Å–∏—Ä—É–µ–º –¥–µ–ª—å—Ç—É –∏ –¥–æ–±–∞–≤–ª—è–µ–º –≤ `activeMs` —Ç–µ–∫—É—â–µ–º—É –∏–≥—Ä–æ–∫—É/—Ä–∞—É–Ω–¥—É; –ø–æ–º–µ—á–∞–µ–º `paused=true`.
  - –ù–∞ `RESUME`: —Ñ–∏–∫—Å–∏—Ä—É–µ–º `resumeAt`, `paused=false`.
  - –ù–∞ `END_TURN`/–∏—Å—á–µ—Ä–ø–∞–Ω–∏–µ —Å–ª–æ–≤: –¥–æ–±–∞–≤–ª—è–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—É—é –¥–µ–ª—å—Ç—É.
  - –ò—Å–∫–ª—é—á–∞–µ–º –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–º–µ–∂—É—Ç–∫–∏ (–ø–∞—É–∑—ã, –ø–µ—Ä–µ—Ö–æ–¥–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã).
- **–ê–≥—Ä–µ–≥–∞—Ü–∏—è**:
  - –ü–æ —Å–µ—Å—Å–∏–∏/—Ä–∞—É–Ω–¥—É/–∏–≥—Ä–æ–∫—É: `activeMs`, `guessedCount` ‚Üí `spw = activeMs / 1000 / max(1, guessedCount)`.
  - –î–ª—è –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ ¬´–∑–∞ –≤—Å—ë –≤—Ä–µ–º—è¬ª –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–µ–¥–∏–∞–Ω—É SPW –ø–æ –Ω–∞–±–æ—Ä–∞–º –∑–Ω–∞—á–µ–Ω–∏–π (—É—Å—Ç–æ–π—á–∏–≤–∞ –∫ –≤—ã–±—Ä–æ—Å–∞–º). –î–ª—è –≤–∏—Ç—Ä–∏–Ω –ø–æ —Ä–∞—É–Ω–¥–∞–º ‚Äî –º–µ–¥–∏–∞–Ω–∞ SPW –ø–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º—É —Ä–∞—É–Ω–¥—É.
  - ¬´–õ—É—á—à–∏–π 2‚Äë–π —Ä–∞—É–Ω–¥¬ª ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π `spw` –≤ —Ä–∞—É–Ω–¥–µ 2.
- **–õ–∏–¥–µ—Ä–±–æ—Ä–¥**: —á–µ–º –º–µ–Ω—å—à–µ `spw`, —Ç–µ–º –ª—É—á—à–µ –ø–æ–∑–∏—Ü–∏—è.
- **–ù—É–ª–µ–≤—ã–µ —É–≥–∞–¥—ã–≤–∞–Ω–∏—è**: –µ—Å–ª–∏ `guessedCount = 0`, SPW –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è ‚Äî –≤ UI –ø–æ–∫–∞–∑—ã–≤–∞–µ–º ¬´‚Äî¬ª, –∏–∑ SPW‚Äë–ª–∏–¥–µ—Ä–±–æ—Ä–¥–æ–≤ –∏–≥—Ä–æ–∫ –∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è –¥–æ –ø–µ—Ä–≤–æ–≥–æ —É–≥–∞–¥–∞–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–∞.

### 20.15. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏–≥—Ä–æ–≤–æ–π —Å–µ—Å—Å–∏–∏

#### 20.15.1. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∞–º–æ–≥–æ —á–∞—Å—Ç–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ–º–æ–≥–æ —Å–ª–æ–≤–∞ –≤ –ø–∞—Ä—Ç–∏–∏
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö**: `wordTracking.passedWords[word] = count`
- **–õ–æ–≥–∏–∫–∞**: –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "–ü—Ä–æ–ø—É—Å–∫" —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —Å—á–µ—Ç—á–∏–∫ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Å–ª–æ–≤–∞
- **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Å—Å–∏–∏
- **–†–∞—Å—á–µ—Ç —Ñ–∞–∫—Ç–∞**: –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–µ—Å—Å–∏–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å–ª–æ–≤–æ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º —Å—á–µ—Ç—á–∏–∫–æ–º

#### 20.15.2. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–∫–∞–∑–∞ —Å–ª–æ–≤
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∞–º–æ–≥–æ —Å–ª–æ–∂–Ω–æ–≥–æ —Å–ª–æ–≤–∞ (–Ω–∞ –∫–æ—Ç–æ—Ä–æ–µ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏)
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö**: `wordTracking.wordDisplayTime[word] = totalTimeSeconds`
- **–õ–æ–≥–∏–∫–∞**: 
  - –í—Ä–µ–º—è –ø–æ–∫–∞–∑–∞ = –≤—Ä–µ–º—è –æ—Ç –º–æ–º–µ–Ω—Ç–∞ –≤—ã–¥–∞—á–∏ —Å–ª–æ–≤–∞ –¥–æ –º–æ–º–µ–Ω—Ç–∞ —É–≥–∞–¥—ã–≤–∞–Ω–∏—è/–ø—Ä–æ–ø—É—Å–∫–∞
  - –ü—Ä–∏ –ø–æ–∫–∞–∑–µ —Å–ª–æ–≤–∞ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –ø–æ–∫–∞–∑–∞ –≤ `_wordShownAt`
  - –ü—Ä–∏ —É–≥–∞–¥—ã–≤–∞–Ω–∏–∏/–ø—Ä–æ–ø—É—Å–∫–µ —Å–ª–æ–≤–∞ –∫ —Å—É–º–º–∞—Ä–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤—Ä–µ–º—è –ø–æ–∫–∞–∑–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
  - –î–ª—è –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤ (0 —Å–µ–∫—É–Ω–¥) –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è 0
  - –ü—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ —Ö–æ–¥–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤—Ä–µ–º—è –Ω–∞ —Ç–∞–π–º–µ—Ä–µ –≤ –º–æ–º–µ–Ω—Ç –≤—ã–¥–∞—á–∏ —Å–ª–æ–≤–∞
  - –ü–∞—É–∑—ã –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–∞—Å—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ (—Ç–∞–π–º–µ—Ä —Ö–æ–¥–∞ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –ø–∞—É–∑—ã)
- **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Å—Å–∏–∏
- **–†–∞—Å—á–µ—Ç —Ñ–∞–∫—Ç–∞**: –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–µ—Å—Å–∏–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å–ª–æ–≤–æ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º —Å—É–º–º–∞—Ä–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º

#### 20.15.3. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞—É–Ω–¥–æ–≤ –∏ –ø–∞—Ä—Ç–∏–∏
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∏–≥—Ä—ã –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö**: 
  - `duration.roundDurations[round] = durationSeconds` - –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ —Ä–∞—É–Ω–¥–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
  - `duration.totalGameDuration = totalSeconds` - –æ–±—â–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∞—Ä—Ç–∏–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
- **–õ–æ–≥–∏–∫–∞**: 
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω–æ–µ –≤—Ä–µ–º—è (–∏—Å–∫–ª—é—á–∞—è –ø–∞—É–∑—ã)
  - –û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –≤—Å–µ—Ö —Ö–æ–¥–æ–≤ –≤ —Ä–∞—É–Ω–¥–µ
  - –ù–µ –≤–∫–ª—é—á–∞–µ—Ç –≤—Ä–µ–º—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —Ä–∞—É–Ω–¥–∞–º–∏
- **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Å—Å–∏–∏
- **–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö**: 
  - –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ä–∞—É–Ω–¥–∞ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –µ–≥–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Å—É–º–º–∞ –≤—Ä–µ–º–µ–Ω–∏ –≤—Å–µ—Ö —Ö–æ–¥–æ–≤)
  - –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø–∞—Ä—Ç–∏–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –æ–±—â–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Å—É–º–º–∞ –≤—Å–µ—Ö —Ä–∞—É–Ω–¥–æ–≤)

### 20.16. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ UI
- **–õ–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –∫–æ–Ω—Ü–µ –∏–≥—Ä—ã (—Å–µ—Å—Å–∏–æ–Ω–Ω—ã–µ)**: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–∫–æ–≤ –∏–≥—Ä–æ–∫–∞ –∑–∞ —Ç–µ–∫—É—â—É—é –∏–≥—Ä–æ–≤—É—é —Å–µ—Å—Å–∏—é.
- **–ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–∞ (all‚Äëtime)**: –¥–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ ‚Äî –∏–≥—Ä—ã, –ø–æ–±–µ–¥—ã/winrate (—Å —É—á—ë—Ç–æ–º –Ω–∏—á—å–∏—Ö), —Ä–µ–∫–æ—Ä–¥—ã –ø–æ —Ä–∞—É–Ω–¥–∞–º, –º–µ–¥–∏–∞–Ω–Ω—ã–µ SPW –ø–æ –∫–∞–∂–¥–æ–º—É —Ä–∞—É–Ω–¥—É, –ª—É—á—à–∞—è —Å–µ—Ä–∏—è –ø–æ–±–µ–¥ –∏ —Ç–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è –ø–æ–±–µ–¥. –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º —ç—Ç–∞–ø–µ ‚Äî —Ñ–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã–µ API; –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ ‚Äî –ë–î.
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–∫—Ç—ã —Å–µ—Å—Å–∏–∏**: —Å–∞–º—ã–µ —á–∞—Å—Ç–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ–º—ã–µ –∏ —Å–ª–æ–∂–Ω—ã–µ —Å–ª–æ–≤–∞, –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞—É–Ω–¥–æ–≤ –∏ –ø–∞—Ä—Ç–∏–∏ (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω –≤ –±—É–¥—É—â–∏—Ö –∑–∞–¥–∞—á–∞—Ö).

### 20.17. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
- **Unit-—Ç–µ—Å—Ç—ã**: –ø–æ–¥—Ä–æ–±–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤ StatsService
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–≥—Ä–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö
- **–ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏**: —Ç–µ—Å—Ç—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å—Ç–µ—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏, –ø–∞—É–∑, –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –≤—Ä–µ–º–µ–Ω–∏ –∏ —Å—á–µ—Ç—á–∏–∫–æ–≤
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–µ—Å—Å–∏—è—Ö

### 20.18. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è MongoDB (–ª–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
  –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º:

#### 20.18.1. –¶–µ–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ MongoDB
- **–û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Å–ª–æ–≤–∞—Ä–µ–π –∏–≥—Ä—ã
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –õ–æ–∫–∞–ª—å–Ω–∞—è –∏–≥—Ä–∞ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ–º —Å —Å–µ—Ä–≤–µ—Ä–æ–º (—Ç–æ–ª—å–∫–æ –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –Ω–∞—á–∞–ª–µ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –∫–æ–Ω—Ü–µ)
- **–î–∞–Ω–Ω—ã–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è**: –°–ª–æ–≤–∞—Ä–∏ –∏–≥—Ä—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –±–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π)
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–º—É –æ—Ç–¥–µ–ª—å–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏ –æ–±—â–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∏

#### 20.18.2. –£–ø—Ä–æ—â–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **–£–¥–∞–ª–µ–Ω–∏–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏**: –£–±—Ä–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã –≤ –ë–î
- **–§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ –∫–æ–Ω—Ü–µ —Å–µ—Å—Å–∏–∏
- **WebSocket**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –Ω–∞—á–∞–ª–µ –∏ –ø–µ—Ä–µ–¥–∞—á–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –∫–æ–Ω—Ü–µ –ø–∞—Ä—Ç–∏–∏
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**: –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –∏–≥—Ä—ã

#### 20.18.3. –°—Ö–µ–º–∞ MongoDB
```javascript
// –ö–æ–ª–ª–µ–∫—Ü–∏—è: players
{
  _id: ObjectId,
  playerKey: String, // "tg:123456" –∏–ª–∏ "name:sha1hash"
  telegramUserId: String, // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  displayName: String,
  displayNameHistory: [String],
  createdAt: Date,
  lastPlayedAt: Date
}

// –ö–æ–ª–ª–µ–∫—Ü–∏—è: player_stats
{
  _id: ObjectId,
  playerKey: String, // —Å—Å—ã–ª–∫–∞ –Ω–∞ players.playerKey
  totals: {
    gamesPlayed: Number,
    wins: Number,
    wordsGuessed: Number,
    wordsPassed: Number,
    totalScore: Number,
    maxPointsPerGame: Number
  },
  perRoundSpwSamples: {
    r0: [Number], // –º–∞—Å—Å–∏–≤ SPW –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –º–µ–¥–∏–∞–Ω—ã
    r1: [Number],
    r2: [Number]
  },
  bestFirstRoundSpw: Number,
  bestSecondRoundSpw: Number,
  bestThirdRoundSpw: Number,
  bestTurnByRound: {
    r0: Number,
    r1: Number,
    r2: Number
  },
  maxPassedPerGame: Number,
  bestWinStreak: Number,
  currentWinStreak: Number,
  medianSpwByRound: {
    r0: Number,
    r1: Number,
    r2: Number
  },
  updatedAt: Date
}

// –ö–æ–ª–ª–µ–∫—Ü–∏—è: games
{
  _id: ObjectId,
  gameId: String, // —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∏–≥—Ä—ã
  startedAt: Date,
  endedAt: Date,
  players: [{
    playerKey: String,
    teamId: String,
    totals: {
      wordsGuessed: Number,
      wordsPassed: Number,
      totalScore: Number,
      spwByRound: {r0: Number, r1: Number, r2: Number},
      bestTurnByRound: {r0: Number, r1: Number, r2: Number}
    }
  }],
  teams: [{
    teamId: String,
    name: String,
    finalScore: Number
  }],
  winners: [String], // –º–∞—Å—Å–∏–≤ teamId –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π
  facts: {
    mostPassedWord: {word: String, count: Number},
    hardestWord: {word: String, totalTimeSeconds: Number}
  },
  duration: {
    roundDurations: {r0: Number, r1: Number, r2: Number},
    totalGameDuration: Number
  }
}

// –ö–æ–ª–ª–µ–∫—Ü–∏—è: words
{
  _id: ObjectId,
  word: String, // –≤ –≤–µ—Ä—Ö–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ
  category: String,
  level: String, // "–æ–±—ã—á–Ω—ã–π" –∏–ª–∏ "–ø–æ–≤—ã—à–µ–Ω–Ω—ã–π"
  createdAt: Date
}

// –ö–æ–ª–ª–µ–∫—Ü–∏—è: leaderboards (–∫—ç—à)
{
  _id: ObjectId,
  metric: String, // "spw_all", "best_streak", etc.
  data: [{
    playerKey: String,
    displayName: String,
    value: Number,
    rank: Number
  }],
  updatedAt: Date
}
```

#### 20.18.4. –ò–Ω–¥–µ–∫—Å—ã MongoDB
```javascript
// –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è players
db.players.createIndex({ "playerKey": 1 }, { unique: true })
db.players.createIndex({ "telegramUserId": 1 }, { unique: true, sparse: true })
db.players.createIndex({ "lastPlayedAt": -1 })

// –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è player_stats
db.player_stats.createIndex({ "playerKey": 1 }, { unique: true })
db.player_stats.createIndex({ "totals.gamesPlayed": -1 })
db.player_stats.createIndex({ "bestWinStreak": -1 })
db.player_stats.createIndex({ "medianSpwByRound.r0": 1 })
db.player_stats.createIndex({ "medianSpwByRound.r1": 1 })
db.player_stats.createIndex({ "medianSpwByRound.r2": 1 })

// –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è games
db.games.createIndex({ "gameId": 1 }, { unique: true })
db.games.createIndex({ "startedAt": -1 })
db.games.createIndex({ "endedAt": -1 })
db.games.createIndex({ "players.playerKey": 1 })

// –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è words
db.words.createIndex({ "word": 1 }, { unique: true })
db.words.createIndex({ "category": 1 })
db.words.createIndex({ "level": 1 })
db.words.createIndex({ "category": 1, "level": 1 })

// –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è leaderboards
db.leaderboards.createIndex({ "metric": 1 }, { unique: true })
db.leaderboards.createIndex({ "updatedAt": -1 })
```

#### 20.18.5. –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏
1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ MongoDB** –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (mongodb driver)
2. **–°–æ–∑–¥–∞–Ω–∏–µ MongoDB —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤** (MongoStatsRepository, MongoWordRepository)
3. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∏ MongoDB
4. **–°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö** –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤ –≤ MongoDB
5. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å MongoDB
6. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

#### 20.18.6. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```javascript
// .env —Ñ–∞–π–ª
// –ü—Ä–∏–º–µ—Ä –¥–ª—è Docker —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π (admin / MyStrongPass2025!)
MONGODB_URI=mongodb://admin:MyStrongPass2025!@localhost:27017/?authSource=admin
MONGODB_DATABASE=hat_game
USE_MONGODB=true
STATS_STORAGE_TYPE=mongodb // –∏–ª–∏ "filesystem"
WORDS_STORAGE_TYPE=mongodb // –∏–ª–∏ "filesystem"
```

#### 20.18.7. Docker –∑–∞–º–µ—Ç–∫–∏ –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π
- –ï—Å–ª–∏ –≤ volume —É–∂–µ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π `featureCompatibilityVersion ... expected '6.0'|'6.3'|'7.0'` ‚Äî —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã –≤ MongoDB 8.0. –†–µ—à–µ–Ω–∏—è:
  - –õ–∏–±–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—Ä–∞–∑ `mongo:8.0`,
  - –õ–∏–±–æ –æ—á–∏—Å—Ç–∏—Ç–µ volume (–¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã) –∏ –ø–æ–¥–Ω–∏–º–∏—Ç–µ `mongo:7.0`.
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –∑–∞–ø—É—Å–∫:
  - `docker volume create mongo_data`
  - `docker run -d --name mongo -p 27017:27017 -e MONGO_INITDB_ROOT_USERNAME=admin -e MONGO_INITDB_ROOT_PASSWORD='MyStrongPass2025!' -e MONGO_INITDB_DATABASE=hat_game -v mongo_data:/data/db mongo:8.0`

#### 20.18.8. –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
1. `npm run init:mongodb` ‚Äî —Å–æ–∑–¥–∞—ë—Ç –∏–Ω–¥–µ–∫—Å—ã
2. `npm run migrate:mongodb` ‚Äî –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç —Å–ª–æ–≤–∞—Ä—å, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–≥—Ä–æ–∫–æ–≤, –ª–∏–¥–µ—Ä–±–æ—Ä–¥—ã –∏ JSONL‚Äë—Å–æ–±—ã—Ç–∏—è –≤ MongoDB
3. `npm start` ‚Äî —Å—Ç–∞—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞; –≤ –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `MongoDB` —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

### 20.19. –ü–æ–ª–∏—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–≤–∫–ª—é—á–∞—è `gamesPlayed`, `wins`, `maxPointsPerGame`, –º–µ–¥–∏–∞–Ω—ã SPW, —Å–µ—Ä–∏–∏ –∏ —Ä–µ–∫–æ—Ä–¥—ã) –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –æ–¥–∏–Ω —Ä–∞–∑ ‚Äî –ø—Ä–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø–∞—Ä—Ç–∏–∏, –∫–æ–≥–¥–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω –ø–æ–±–µ–¥–∏—Ç–µ–ª—å (–∏–ª–∏ –ø–æ–±–µ–¥–∏—Ç–µ–ª–∏ –ø—Ä–∏ –Ω–∏—á—å–µ–π).
- –í –ø–∞—Ä—Ç–∏—è—Ö –±–µ–∑ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è (–∏–ª–∏ –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö) –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –Ω–µ –∏–∑–º–µ–Ω—è—é—Ç—Å—è.

### 20.20. –õ–∏–¥–µ—Ä–±–æ—Ä–¥—ã (–ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ—á–µ–Ω—å –Ω–∞ MVP)
- `spw_all` ‚Äî –º–µ–¥–∏–∞–Ω–Ω–∞—è SPW —Å—É–º–º–∞—Ä–Ω–æ (–º–µ–Ω—å—à–µ ‚Äî –ª—É—á—à–µ)
- `spw_r1`, `spw_r2`, `spw_r3` ‚Äî –º–µ–¥–∏–∞–Ω–Ω—ã–µ SPW –ø–æ —Ä–∞—É–Ω–¥–∞–º
- `best_round_spw_r1`, `best_round_spw_r2`, `best_round_spw_r3` ‚Äî –ª—É—á—à–∏–µ (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ) SPW –ø–æ —Ä–∞—É–Ω–¥–∞–º
- `best_streak` ‚Äî –ª—É—á—à–∞—è —Å–µ—Ä–∏—è –ø–æ–±–µ–¥
- `max_points_per_game` ‚Äî –º–∞–∫—Å–∏–º—É–º –±–∞–ª–ª–æ–≤ –∑–∞ –ø–∞—Ä—Ç–∏—é
- `max_passed_per_game` ‚Äî –º–∞–∫—Å–∏–º—É–º –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∑–∞ –ø–∞—Ä—Ç–∏—é
- `best_turn_r1`, `best_turn_r2`, `best_turn_r3` ‚Äî –ª—É—á—à–∏–π —Ö–æ–¥ (–º–∞–∫—Å. –æ—á–∫–æ–≤ –∑–∞ –æ–¥–∏–Ω —Ö–æ–¥) –ø–æ –∫–∞–∂–¥–æ–º—É —Ä–∞—É–Ω–¥—É
- **–ê–±—Å—Ç—Ä–∞–∫—Ü–∏–∏**: `StatsRepository`/`IdentityRepository` —Å —Ñ–∞–π–ª–æ–≤–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π —Å–µ–π—á–∞—Å (`File*Repository`) –∏ `Db*Repository` –ø–æ—Ç–æ–º.
- **–ë–î (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è)**: PostgreSQL.
- **–°—Ö–µ–º–∞ (–Ω–∞–±—Ä–æ—Å–æ–∫)**:
  - `players(player_id pk, telegram_user_id unique null, display_name, created_at)`
  - `player_stats(player_id fk, totals jsonb, categories jsonb, last_played_at, primary key (player_id))`
  - `games(game_id pk, started_at, ended_at, meta jsonb)`
  - `game_events(game_id fk, seq, ts, type, payload jsonb, primary key (game_id, seq))`
- **–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: –∏–º–ø–æ—Ä—Ç —Ñ–∞–π–ª–æ–≤ `public/stats/players/*.json` –≤ `players`/`player_stats`; –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è `name:<sha1>` ‚Üí `tg:<id>` –Ω–∞ —É—Ä–æ–≤–Ω–µ ETL.
- **–ë–æ—Ç**: —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç webhook –æ—Ç Telegram, —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–µ—Å—Å–∏—è–º–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π, —Ñ—Ä–æ–Ω—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ/–∏–≥—Ä–µ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä.